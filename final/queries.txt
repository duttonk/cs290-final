

DROP TABLE IF EXISTS user_info;
DROP TABLE IF EXISTS type;
DROP TABLE IF EXISTS workout;
DROP TABLE IF EXISTS friends;
DROP TABLE IF EXISTS users;

CREATE TABLE users (
	username VARCHAR(255) NOT NULL,
	pwd VARCHAR(255) NOT NULL,
	PRIMARY KEY (username)
)ENGINE=INNODB;

CREATE TABLE type (
	type VARCHAR(255) NOT NULL,
	PRIMARY KEY (type)
)ENGINE=INNODB;

CREATE TABLE user_info (
	username VARCHAR(255) NOT NULL,
	name VARCHAR(255),
	gender VARCHAR(2),
	dob DATE,
	location VARCHAR(255),
	inspiration VARCHAR(255),
	image LONGBLOB,
	PRIMARY KEY (username),
	FOREIGN KEY(username) REFERENCES users(username)
	ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=INNODB;

CREATE TABLE workout (
	id INT AUTO_INCREMENT,
	username VARCHAR(255) NOT NULL,
	date DATE NOT NULL,
	type VARCHAR(255) NOT NULL,
	duration TIME NOT NULL,
	calories INT,
	weather VARCHAR(255),
	notes VARCHAR(255),
	#image LONGBLOB,
	PRIMARY KEY (id),
	FOREIGN KEY(username) REFERENCES users(username)
	ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=INNODB;

CREATE TABLE friends (
	username VARCHAR(255) NOT NULL,
	friend1 VARCHAR(255),
	friend2 VARCHAR(255),
	friend3 VARCHAR(255),
	friend4 VARCHAR(255),
	friend5 VARCHAR(255),
	PRIMARY KEY (username),
	CONSTRAINT FOREIGN KEY(username) REFERENCES users(username)
	ON UPDATE CASCADE ON DELETE CASCADE,
	CONSTRAINT FOREIGN KEY(friend1) REFERENCES users(username)
	ON UPDATE CASCADE ON DELETE SET NULL,
	CONSTRAINT FOREIGN KEY(friend2) REFERENCES users(username)
	ON UPDATE CASCADE ON DELETE SET NULL,
	CONSTRAINT FOREIGN KEY(friend3) REFERENCES users(username)
	ON UPDATE CASCADE ON DELETE SET NULL,
	CONSTRAINT FOREIGN KEY(friend4) REFERENCES users(username)
	ON UPDATE CASCADE ON DELETE SET NULL,
	CONSTRAINT FOREIGN KEY(friend5) REFERENCES users(username)
	ON UPDATE CASCADE ON DELETE SET NULL
)ENGINE=INNODB;


INSERT INTO type (type) VALUES("Run");
INSERT INTO type (type) VALUES("Bike");
INSERT INTO type (type) VALUES("Walk");
INSERT INTO type (type) VALUES("Zumba");
INSERT INTO type (type) VALUES("Yoga");
INSERT INTO type (type) VALUES("Pilates");
INSERT INTO type (type) VALUES("CrossFit");